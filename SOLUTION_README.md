# üéØ –†–µ—à–µ–Ω–∏–µ: –î–µ—Ç–æ–∫—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –¢–∞—Ç–∞—Ä—Å–∫–∏—Ö –¢–µ–∫—Å—Ç–æ–≤

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –†–µ—à–µ–Ω–∏—è

–ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –¥–µ—Ç–æ–∫—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ç–∞—Ç–∞—Ä—Å–∫–∏—Ö —Ç–µ–∫—Å—Ç–æ–≤ —Å —Ü–µ–ª–µ–≤—ã–º J-score ‚â• 0.70.

### –¶–µ–ª–µ–≤—ã–µ –ú–µ—Ç—Ä–∏–∫–∏
- **STA** (Style Transfer Accuracy): ‚â•0.88 - –¥–µ—Ç–æ–∫—Å–∏—Ñ–∏–∫–∞—Ü–∏—è
- **SIM** (Similarity): ‚â•0.94 - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–º—ã—Å–ª–∞
- **FL** (Fluency): ‚â•0.94 - –≥—Ä–∞–º–º–∞—Ç–∏—á–Ω–æ—Å—Ç—å
- **J-score**: ‚â•0.70 - –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –º–µ—Ç—Ä–∏–∫–∞

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –†–µ—à–µ–Ω–∏—è

```
.
‚îú‚îÄ‚îÄ ANALYSIS.md                    # –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã
‚îú‚îÄ‚îÄ SOLUTION_README.md             # –≠—Ç–æ —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ main_optimized.py              # ‚≠ê –§–ò–ù–ê–õ–¨–ù–û–ï –†–ï–®–ï–ù–ò–ï
‚îú‚îÄ‚îÄ main_GPT4O_MINI_OPTIMIZED.py   # –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ —Å multi-candidate
‚îú‚îÄ‚îÄ main_UNIVERSAL.py              # –ë–∞–∑–æ–≤–∞—è –≤–µ—Ä—Å–∏—è
‚îú‚îÄ‚îÄ evaluate_j_score.py            # –û—Ü–µ–Ω–∫–∞ –º–µ—Ç—Ä–∏–∫
‚îú‚îÄ‚îÄ test_api.py                    # –¢–µ—Å—Ç API
‚îú‚îÄ‚îÄ requirements.txt               # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ dev_inputs.tsv                 # –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (600 –ø—Ä–∏–º–µ—Ä–æ–≤)
‚îî‚îÄ‚îÄ submission_optimized.tsv       # –†–µ–∑—É–ª—å—Ç–∞—Ç (—Å–æ–∑–¥–∞—ë—Ç—Å—è –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞)
```

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π –°—Ç–∞—Ä—Ç

### –í–∞—Ä–∏–∞–Ω—Ç 1: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –†–µ—à–µ–Ω–∏–µ (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) ‚≠ê

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install openai pandas tqdm

# –ó–∞–ø—É—Å–∫
python main_optimized.py

# –†–µ–∑—É–ª—å—Ç–∞—Ç: submission_optimized.tsv
# –í—Ä–µ–º—è: ~30-40 –º–∏–Ω—É—Ç –Ω–∞ 600 –ø—Ä–∏–º–µ—Ä–æ–≤
# –°—Ç–æ–∏–º–æ—Å—Ç—å: ~$0.10-0.15
```

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏**:
- ‚úÖ 1 API –≤—ã–∑–æ–≤ –Ω–∞ —Ç–µ–∫—Å—Ç (—ç–∫–æ–Ω–æ–º–∏—á–Ω–æ)
- ‚úÖ Chain-of-Thought –ø—Ä–æ–º–ø—Ç–∏–Ω–≥
- ‚úÖ 7 few-shot –ø—Ä–∏–º–µ—Ä–æ–≤
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–æ–≤
- ‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π J-score: 0.72-0.75

### –í–∞—Ä–∏–∞–Ω—Ç 2: Multi-Candidate (–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –ö–∞—á–µ—Å—Ç–≤–æ)

```bash
python main_GPT4O_MINI_OPTIMIZED.py

# –†–µ–∑—É–ª—å—Ç–∞—Ç: submission_gpt4o_mini.tsv
# –í—Ä–µ–º—è: ~60-90 –º–∏–Ω—É—Ç
# –°—Ç–æ–∏–º–æ—Å—Ç—å: ~$0.30-0.40
```

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏**:
- ‚úÖ 3-4 API –≤—ã–∑–æ–≤–∞ –Ω–∞ —Ç–µ–∫—Å—Ç
- ‚úÖ –î–≤—É—Ö–ø—Ä–æ—Ö–æ–¥–Ω–∞—è –¥–µ—Ç–æ–∫—Å–∏—Ñ–∏–∫–∞—Ü–∏—è
- ‚úÖ –≠–≤—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å—Ç–∞—Ç–æ—á–Ω–æ–π —Ç–æ–∫—Å–∏—á–Ω–æ—Å—Ç–∏
- ‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π J-score: 0.73-0.76

---

## üìä –û—Ü–µ–Ω–∫–∞ –†–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è submission —Ñ–∞–π–ª–∞:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥–ª—è –æ—Ü–µ–Ω–∫–∏
pip install transformers sentence-transformers torch scikit-learn

# –û—Ü–µ–Ω–∫–∞ J-score
python evaluate_j_score.py submission_optimized.tsv
```

**–ß—Ç–æ –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç—Å—è**:
- STA: –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –Ω–µ—Ç–æ–∫—Å–∏—á–Ω–æ—Å—Ç–∏ (xlm-roberta-large-toxicity-classifier-v2)
- SIM: –∫–æ—Å–∏–Ω—É—Å–Ω–æ–µ —Å—Ö–æ–¥—Å—Ç–≤–æ (LaBSE embeddings)
- FL: –±–µ–≥–ª–æ—Å—Ç—å (—ç–≤—Ä–∏—Å—Ç–∏–∫–∏ + –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ä—É–±–∫–æ–≤)
- J: mean(STA √ó SIM √ó FL)

---

## üîç –î–µ—Ç–∞–ª–∏ –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### main_optimized.py

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**:
```
–í—Ö–æ–¥ ‚Üí –ü—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥ ‚Üí GPT-4o-mini ‚Üí –ü–æ—Å—Ç-–æ–±—Ä–∞–±–æ—Ç–∫–∞ ‚Üí –í–∞–ª–∏–¥–∞—Ü–∏—è ‚Üí –í—ã—Ö–æ–¥
```

#### 1. –ü—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥ (–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π)
```python
def preprocess(text):
    # –£–¥–∞–ª—è–µ–º —Ç–æ–ª—å–∫–æ @—É–ø–æ–º–∏–Ω–∞–Ω–∏—è (—Ç–æ–∫—Å–∏—á–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç)
    text = re.sub(r'@\w+[,\s]*', '', text)
    # –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –ø—Ä–æ–±–µ–ª—ã
    text = re.sub(r'\s+', ' ', text).strip()
    return text
```

**–ü–æ—á–µ–º—É –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π**:
- ‚ùå –ù–ï —É–¥–∞–ª—è–µ–º —Ç–æ–∫—Å–∏—á–Ω—ã–µ —Å–ª–æ–≤–∞ ‚Üí –¥–æ–≤–µ—Ä—è–µ–º GPT
- ‚úÖ –¢–æ–ª—å–∫–æ @user ‚Üí —á–∞—Å—Ç–æ —Å–æ–∑–¥–∞—ë—Ç —Ç–æ–∫—Å–∏—á–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ–º –º–∞–∫—Å–∏–º—É–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–ª—è GPT

#### 2. Chain-of-Thought –ü—Ä–æ–º–ø—Ç

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞**:
1. **–†–æ–ª—å**: –≠–∫—Å–ø–µ—Ä—Ç –ø–æ –¥–µ—Ç–æ–∫—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ç–∞—Ç–∞—Ä—Å–∫–æ–≥–æ —è–∑—ã–∫–∞
2. **–°–ø–µ—Ü–∏—Ñ–∏–∫–∞**: Code-switching, –º–æ—Ä—Ñ–æ–ª–æ–≥–∏—è, –∞–≥–≥–ª—é—Ç–∏–Ω–∞—Ü–∏—è
3. **–ê–ª–≥–æ—Ä–∏—Ç–º**: 4 —à–∞–≥–∞ (–ù–∞–π—Ç–∏ ‚Üí –ü–æ–Ω—è—Ç—å ‚Üí –î–µ—Ç–æ–∫—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å ‚Üí –ü—Ä–æ–≤–µ—Ä–∏—Ç—å)
4. **Few-shot**: 7 –ø—Ä–∏–º–µ—Ä–æ–≤ (—Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã —Ç–æ–∫—Å–∏—á–Ω–æ—Å—Ç–∏)
5. **–§–æ—Ä–º–∞—Ç**: –ß—ë—Ç–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –≤—ã–≤–æ–¥—É

**–î–ª–∏–Ω–∞**: ~1500-2000 —Ç–æ–∫–µ–Ω–æ–≤

**–ü—Ä–∏–º–µ—Ä—ã —Ç–æ–∫—Å–∏—á–Ω–æ—Å—Ç–∏**:
- –†—É—Å—Å–∫–∏–µ –º–∞—Ç—ã (–∂–æ–ø–∞, –±–ª—è, —Ö—É–π)
- –¢–∞—Ç–∞—Ä—Å–∫–∏–µ –æ—Å–∫–æ—Ä–±–ª–µ–Ω–∏—è (–∫—É—Ç–∞–∫, —Ç–∏–ª–µ, —á—É—á–∫–∞)
- @user + –æ—Å–∫–æ—Ä–±–ª–µ–Ω–∏—è
- –°–ª–∞–±—ã–µ –≤—É–ª—å–≥–∞—Ä–∏–∑–º—ã (–±–ª–∏–Ω, —Å–æ—Å–æ–ø)
- –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è —Ç–æ–∫—Å–∏—á–Ω–æ—Å—Ç—å

#### 3. GPT-4o-mini –ü–∞—Ä–∞–º–µ—Ç—Ä—ã

```python
response = client.chat.completions.create(
    model="gpt-4o-mini",
    messages=[{"role": "user", "content": prompt}],
    temperature=0.25,  # –ë–∞–ª–∞–Ω—Å –¥–µ—Ç–µ—Ä–º–∏–Ω–∏–∑–º–∞ –∏ –≤–∞—Ä–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç–∏
    max_tokens=400,    # –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤
    top_p=0.9,         # –§–æ–∫—É—Å –Ω–∞ –≤–µ—Ä–æ—è—Ç–Ω—ã—Ö —Ç–æ–∫–µ–Ω–∞—Ö
    seed=42            # –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å
)
```

**–ü–æ—á–µ–º—É temperature=0.25**:
- –ù–∏–∑–∫–∞—è (0.1): –°–ª–∏—à–∫–æ–º –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Å—Ç–∏—á–Ω–∞, –º–æ–∂–µ—Ç –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å —Ç–æ–∫—Å–∏—á–Ω–æ—Å—Ç—å
- –°—Ä–µ–¥–Ω—è—è (0.25): ‚úÖ –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å
- –í—ã—Å–æ–∫–∞—è (0.5+): –ò–∑–±—ã—Ç–æ—á–Ω–∞—è –≤–∞—Ä–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç—å, –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å —Å–º—ã—Å–ª

#### 4. –ü–æ—Å—Ç-–æ–±—Ä–∞–±–æ—Ç–∫–∞

```python
def postprocess(text, original):
    # 1. –û—á–∏—Å—Ç–∫–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ GPT
    text = text.strip('"\'`')

    # 2. –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–µ—Ñ–∏–∫—Å–æ–≤ ("–î–µ—Ç–æ–∫—Å:", "–†–µ–∑—É–ª—å—Ç–∞—Ç:")
    for prefix in ['–¥–µ—Ç–æ–∫—Å:', '—Ä–µ–∑—É–ª—å—Ç–∞—Ç:', ...]:
        if text.lower().startswith(prefix):
            text = text[len(prefix):].strip()

    # 3. –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–ª–∏–Ω—ã (–Ω–µ –∫–æ—Ä–æ—á–µ 25% –æ—Ä–∏–≥–∏–Ω–∞–ª–∞)
    if len(text) < len(original) * 0.25:
        return original

    # 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ–±—Ä—É–±–∫–∏ (–ø—Ä–µ–¥–ª–æ–≥–∏ –≤ –∫–æ–Ω—Ü–µ)
    if ends_with_preposition(text):
        return original

    return text
```

#### 5. –í–∞–ª–∏–¥–∞—Ü–∏—è

- ‚úÖ –ù–µ –ø—É—Å—Ç–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- ‚úÖ –î–ª–∏–Ω–∞ ‚â•25% –æ—Ä–∏–≥–∏–Ω–∞–ª–∞
- ‚úÖ –ù–µ—Ç –æ–±—Ä—É–±–∫–æ–≤ (–ø—Ä–µ–¥–ª–æ–≥–∏/—Å–æ—é–∑—ã –≤ –∫–æ–Ω—Ü–µ)
- ‚úÖ –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ç–∞–∫ ‚Üí –≤–æ–∑–≤—Ä–∞—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª–∞

---

## üìà –û–∂–∏–¥–∞–µ–º—ã–µ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –ú–µ—Ç—Ä–∏–∫–∏

| –§–∞–π–ª | STA | SIM | FL | J-score | –í—Ä–µ–º—è | –°—Ç–æ–∏–º–æ—Å—Ç—å |
|------|-----|-----|----|---------| ------|-----------|
| submission_optimized.tsv | 0.88-0.90 | 0.92-0.94 | 0.94-0.96 | **0.72-0.75** | 30-40 –º–∏–Ω | $0.10-0.15 |
| submission_gpt4o_mini.tsv | 0.90-0.92 | 0.90-0.92 | 0.94-0.96 | **0.73-0.76** | 60-90 –º–∏–Ω | $0.30-0.40 |

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ò–∑–º–µ–Ω–µ–Ω–∏–π

- **–ò–∑–º–µ–Ω–µ–Ω–æ**: 85-95% —Ç–µ–∫—Å—Ç–æ–≤
- **–°—Ä–µ–¥–Ω–∏–π Œî –¥–ª–∏–Ω—ã**: 8-12%
- **API –≤—ã–∑–æ–≤–æ–≤**: 600 (optimized) / 1800-2400 (multi-candidate)

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### –ï—Å–ª–∏ J-score < 0.70

**–ü—Ä–æ–±–ª–µ–º–∞: –ù–∏–∑–∫–∏–π STA (–Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –¥–µ—Ç–æ–∫—Å–∏—Ñ–∏–∫–∞—Ü–∏—è)**

–†–µ—à–µ–Ω–∏—è:
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `main_GPT4O_MINI_OPTIMIZED.py` (–¥–≤—É—Ö–ø—Ä–æ—Ö–æ–¥–Ω–∞—è –¥–µ—Ç–æ–∫—Å–∏—Ñ–∏–∫–∞—Ü–∏—è)
2. –°–Ω–∏–∑—å—Ç–µ temperature –¥–æ 0.15-0.20
3. –î–æ–±–∞–≤—å—Ç–µ –±–æ–ª—å—à–µ few-shot –ø—Ä–∏–º–µ—Ä–æ–≤
4. –£–≤–µ–ª–∏—á—å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ –¥–æ 3-5

**–ü—Ä–æ–±–ª–µ–º–∞: –ù–∏–∑–∫–∏–π SIM (–∏–∑–±—ã—Ç–æ—á–Ω–∞—è –¥–µ—Ç–æ–∫—Å–∏—Ñ–∏–∫–∞—Ü–∏—è)**

–†–µ—à–µ–Ω–∏—è:
1. –£–≤–µ–ª–∏—á—å—Ç–µ temperature –¥–æ 0.30-0.35
2. –î–æ–±–∞–≤—å—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—é –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
3. –£–≤–µ–ª–∏—á—å—Ç–µ –ø–æ—Ä–æ–≥ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–ª–∏–Ω—ã (25% ‚Üí 30%)

**–ü—Ä–æ–±–ª–µ–º–∞: –ù–∏–∑–∫–∏–π FL (–æ–±—Ä—É–±–∫–∏, –Ω–µ–≥—Ä–∞–º–º–∞—Ç–∏—á–Ω–æ—Å—Ç—å)**

–†–µ—à–µ–Ω–∏—è:
1. –£–ª—É—á—à–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ –æ–±—Ä—É–±–∫–∏ –≤ –ø–æ—Å—Ç-–æ–±—Ä–∞–±–æ—Ç–∫–µ
2. –î–æ–±–∞–≤—å—Ç–µ –≤–∞–ª–∏–¥–∞—Ü–∏—é –Ω–µ–∑–∞–∫—Ä—ã—Ç–æ–π –ø—É–Ω–∫—Ç—É–∞—Ü–∏–∏
3. –£–≤–µ–ª–∏—á—å—Ç–µ –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –¥–ª–∏–Ω—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

---

## üí° –°–æ–≤–µ—Ç—ã –ø–æ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### 1. –†–∞–±–æ—Ç–∞ —Å API

```python
# –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç rate limits
import time
time.sleep(0.5)  # –î–æ–±–∞–≤—å—Ç–µ –∑–∞–¥–µ—Ä–∂–∫—É –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏

# –ï—Å–ª–∏ –æ—à–∏–±–∫–∏ timeout
MAX_RETRIES = 5  # –£–≤–µ–ª–∏—á—å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–≤—Ç–æ—Ä–æ–≤
```

### 2. –≠–∫–æ–Ω–æ–º–∏—è –¢–æ–∫–µ–Ω–æ–≤

```python
# –°–æ–∫—Ä–∞—Ç–∏—Ç–µ –ø—Ä–æ–º–ø—Ç (—É–¥–∞–ª–∏—Ç–µ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–º–µ—Ä—ã)
# –¢–µ–∫—É—â–∏–π: ~1500-2000 —Ç–æ–∫–µ–Ω–æ–≤
# –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π: ~800-1000 —Ç–æ–∫–µ–Ω–æ–≤ (3-4 –ø—Ä–∏–º–µ—Ä–∞)

# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
@lru_cache(maxsize=2000)
def detoxify_text(text): ...
```

### 3. –£—Å–∫–æ—Ä–µ–Ω–∏–µ –û–±—Ä–∞–±–æ—Ç–∫–∏

```python
# –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (—Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–¥–µ)
from concurrent.futures import ThreadPoolExecutor

with ThreadPoolExecutor(max_workers=5) as executor:
    results = list(executor.map(detoxify_text, texts))
```

---

## üéì –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –î–µ—Ç–∞–ª–∏

### –Ø–∑—ã–∫–æ–≤—ã–µ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –¢–∞—Ç–∞—Ä—Å–∫–æ–≥–æ

1. **Code-Switching**: 70-80% —Ç–µ–∫—Å—Ç–æ–≤ —Å–º–µ—à–∏–≤–∞—é—Ç —Ç–∞—Ç–∞—Ä—Å–∫–∏–π –∏ —Ä—É—Å—Å–∫–∏–π
2. **–¢–æ–∫—Å–∏—á–Ω–æ—Å—Ç—å**: 80% —Ä—É—Å—Å–∫–∏–µ –º–∞—Ç—ã, 20% —Ç–∞—Ç–∞—Ä—Å–∫–∏–µ –æ—Å–∫–æ—Ä–±–ª–µ–Ω–∏—è
3. **–ú–æ—Ä—Ñ–æ–ª–æ–≥–∏—è**: –ê–≥–≥–ª—é—Ç–∏–Ω–∞—Ü–∏—è ‚Üí –æ–¥–Ω–æ —Å–ª–æ–≤–æ ‚Üí –º–Ω–æ–≥–æ —Ñ–æ—Ä–º
4. **–ö–æ–¥–∏—Ä–æ–≤–∫–∞**: –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ –∫–∏—Ä–∏–ª–ª–∏—Ü–∞, —Ä–µ–¥–∫–æ –ª–∞—Ç–∏–Ω–∏—Ü–∞

### –ü–∞—Ç—Ç–µ—Ä–Ω—ã –¢–æ–∫—Å–∏—á–Ω–æ—Å—Ç–∏

**–†—É—Å—Å–∫–∏–µ**:
- –°–∏–ª—å–Ω—ã–µ: –±–ª—è, —Ö—É–π, –ø–∏–∑–¥, –µ–±–∞–Ω, —Å—É–∫–∞
- –°—Ä–µ–¥–Ω–∏–µ: –∂–æ–ø–∞, —Å—Ä–∞—Ç—å, –≥–æ–≤–Ω–æ
- –°–ª–∞–±—ã–µ: –±–ª–∏–Ω, —Ö—Ä–µ–Ω, —á–µ—Ä—Ç

**–¢–∞—Ç–∞—Ä—Å–∫–∏–µ**:
- –∫—É—Ç–∞–∫ (–∑–∞–¥–Ω–∏—Ü–∞)
- —á—É—á–∫–∞/–¥—É–Ω–≥—ã–∑ (—Å–≤–∏–Ω—å—è)
- —Ç–∏–ª–µ (—Å—É–º–∞—Å—à–µ–¥—à–∏–π)
- –∞–Ω–≥—ã—Ä–∞ (–∏–¥–∏–æ—Ç)
- —Å–æ—Å–æ–ø (—Å–æ—Å–∞—Ç—å)

### –°—Ç—Ä–∞—Ç–µ–≥–∏—è –ë–∞–ª–∞–Ω—Å–∞ –ú–µ—Ç—Ä–∏–∫

```
STA ‚Üë (–∞–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è –¥–µ—Ç–æ–∫—Å–∏—Ñ–∏–∫–∞—Ü–∏—è)
  ‚Üì
SIM ‚Üì (–º–Ω–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π)

–û–ø—Ç–∏–º—É–º: temperature=0.25, 1 –∫–∞–Ω–¥–∏–¥–∞—Ç
```

---

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –§–∞–π–ª—ã

1. **ANALYSIS.md** - –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã:
   - –ê–Ω–∞–ª–∏–∑ –¥–∞—Ç–∞—Å–µ—Ç–∞
   - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–æ–≤
   - –ü—Ä–∏—á–∏–Ω—ã –Ω–∏–∑–∫–æ–≥–æ J-score
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

2. **main_optimized.py** - –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:
   - Chain-of-Thought –ø—Ä–æ–º–ø—Ç–∏–Ω–≥
   - 7 few-shot –ø—Ä–∏–º–µ—Ä–æ–≤
   - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π pipeline

3. **main_GPT4O_MINI_OPTIMIZED.py** - –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:
   - Multi-candidate generation
   - –î–≤—É—Ö–ø—Ä–æ—Ö–æ–¥–Ω–∞—è –¥–µ—Ç–æ–∫—Å–∏—Ñ–∏–∫–∞—Ü–∏—è
   - –≠–≤—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ

4. **evaluate_j_score.py** - –õ–æ–∫–∞–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞:
   - STA (XLM-RoBERTa toxicity classifier)
   - SIM (LaBSE embeddings)
   - FL (—ç–≤—Ä–∏—Å—Ç–∏–∫–∏)

---

## üéØ –ò—Ç–æ–≥–æ–≤—ã–µ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è –•–∞–∫–∞—Ç–æ–Ω–∞

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ**: `main_optimized.py` (–±–∞–ª–∞–Ω—Å —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ –∫–∞—á–µ—Å—Ç–≤–∞)
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ**: `python evaluate_j_score.py submission_optimized.tsv`
3. **–ï—Å–ª–∏ J < 0.70**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `main_GPT4O_MINI_OPTIMIZED.py`
4. **–û—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ**: –õ—É—á—à–∏–π —Ñ–∞–π–ª –ø–æ J-score

### –î–ª—è –ü—Ä–æ–¥–∞–∫—à–µ–Ω–∞

1. –î–æ–±–∞–≤—å—Ç–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É (ThreadPoolExecutor)
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ monitoring (API rate limits, errors)
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ batching –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ —Ç–æ–∫–µ–Ω–æ–≤
4. –î–æ–±–∞–≤—å—Ç–µ fallback –Ω–∞ rule-based –º–µ—Ç–æ–¥—ã

---

## üîó –°—Å—ã–ª–∫–∏

- **Issue**: https://github.com/VisageDvachevsky/AIZAMAN/issues/1
- **Pull Request**: https://github.com/VisageDvachevsky/AIZAMAN/pull/2
- **Artemox API**: https://api.artemox.com/v1
- **–ú–æ–¥–µ–ª–∏**:
  - GPT-4o-mini
  - LaBSE (sentence-transformers/LaBSE)
  - XLM-RoBERTa (textdetox/xlmr-large-toxicity-classifier-v2)

---

## üìù Changelog

**2025-11-30**:
- ‚úÖ –°–æ–∑–¥–∞–Ω main_optimized.py (—Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –¥–µ—Ç–∞–ª—å–Ω—ã–π ANALYSIS.md
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω Chain-of-Thought –ø—Ä–æ–º–ø—Ç
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (SOLUTION_README.md)
- ‚úÖ –¶–µ–ª–µ–≤–æ–π J-score: 0.72-0.75

---

**–£–¥–∞—á–∏ –Ω–∞ —Ö–∞–∫–∞—Ç–æ–Ω–µ!** üöÄ
